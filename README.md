# ๐งญ AI-Tourist

**ะะพัะพะฒัะน ะบ ะฟัะพะดะฐะบัะตะฝั AI-ะฟะพะผะพัะฝะธะบ ะดะปั ะฟะตัะธั ะผะฐัััััะพะฒ ะฟะพ ะะธะถะฝะตะผั ะะพะฒะณะพัะพะดั**

ะะตะฝะตัะธััะตั ะฟะตััะพะฝะฐะปัะฝัะต ะผะฐัััััั ะธะท 3โ5 ัะพัะตะบ ั ML-ัะตะบะพะผะตะฝะดะฐัะธัะผะธ, ะพะฑัััะฝะตะฝะธัะผะธ ะพั LLM ะธ ะธะฝัะตัะฐะบัะธะฒะฝะพะน ะบะฐััะพะน.

---

## ๐ ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโ      โโโโโโโโโโโโโโโโ      โโโโโโโโโโโโโโโ
โ   React     โโโโโโโถโ   FastAPI    โโโโโโโถโ  PostgreSQL โ
โ  ะคัะพะฝัะตะฝะด   โ      โ   ะัะบะตะฝะด     โ      โ  + Redis    โ
โโโโโโโโโโโโโโโ      โโโโโโโโโโโโโโโโ      โโโโโโโโโโโโโโโ
                            โ
                            โโโโถ ะกะตัะฒะธั ัะผะฑะตะดะดะธะฝะณะพะฒ (sentence-transformers)
                            โโโโถ ะะฐะฝะถะธัะพะฒะฐะฝะธะต (ะบะพัะธะฝััะฝะพะต ััะพะดััะฒะพ)
                            โโโโถ ะะปะฐะฝะธัะพะฒัะธะบ ะผะฐัััััะฐ (ัะฟัะพััะฝะฝัะน TSP)
                            โโโโถ LLM-ัะตัะฒะธั (Claude/GPT)
```

### ะขะตัะฝะพะปะพะณะธัะตัะบะธะน ััะตะบ

| ะกะปะพะน            | ะขะตัะฝะพะปะพะณะธะธ                                                   |
|-----------------|--------------------------------------------------------------|
| **ะคัะพะฝัะตะฝะด**    | React 18 + TypeScript + Vite + Tailwind CSS + React-Leaflet |
| **ะัะบะตะฝะด**      | FastAPI + Python 3.11 + Poetry                               |
| **ะะฐะทะฐ ะดะฐะฝะฝัั** | PostgreSQL 16 + Redis 7                                      |
| **ML**          | sentence-transformers + scikit-learn + numpy                 |
| **LLM**         | Anthropic Claude Sonnet 4 / OpenAI GPT-4                     |
| **DevOps**      | Docker Compose + Makefile                                    |

---

## ๐ ะัััััะน ััะฐัั

### ะขัะตะฑะพะฒะฐะฝะธั

- Docker & Docker Compose
- API-ะบะปััะธ: Anthropic ะธะปะธ OpenAI

### ะฃััะฐะฝะพะฒะบะฐ

1. **ะะปะพะฝะธัะพะฒะฐัั ัะตะฟะพะทะธัะพัะธะน**

```bash
git clone https://github.com/VisageDvachevsky/gorkycode
cd gorkycode
```

2. **ะะฐัััะพะธัั ะพะบััะถะตะฝะธะต**

```bash
cp .env.example .env
# ะฃะบะฐะถะธัะต API-ะบะปััะธ:
# ANTHROPIC_API_KEY=sk-ant-...
# ะธะปะธ
# OPENAI_API_KEY=sk-...
```

3. **ะะฐะฟัััะธัั ะฒัะต ัะตัะฒะธัั**

```bash
make up
```

ะะพะผะฐะฝะดะฐ ะฒัะฟะพะปะฝะธั:

- ะกะฑะพัะบั Docker-ะพะฑัะฐะทะพะฒ
- ะะฐะฟััะบ PostgreSQL, Redis, ะัะบะตะฝะดะฐ, ะคัะพะฝัะตะฝะดะฐ
- ะะฝะธัะธะฐะปะธะทะฐัะธั ััะตะผั ะะ
- ะัะบัะพะตั ะฟัะธะปะพะถะตะฝะธะต ะฝะฐ `http://localhost:5173`

4. **ะะฐะณััะทะธัั POI-ะดะฐะฝะฝัะต**

```bash
docker compose exec backend poetry run python scripts/load_pois.py
```

### ะะพะผะฐะฝะดั ัะฐะทัะฐะฑะพัะบะธ

```bash
make up           # ะะฐะฟััะบ ะฒัะตั ัะตัะฒะธัะพะฒ
make down         # ะััะฐะฝะพะฒะบะฐ ะฒัะตั ัะตัะฒะธัะพะฒ
make build        # ะกะฑะพัะบะฐ ะบะพะฝัะตะนะฝะตัะพะฒ
make rebuild      # ะะตัะตัะฑะพัะบะฐ ะธ ัะตััะฐัั
make logs         # ะะฑัะธะต ะปะพะณะธ
make logs-api     # ะะพะณะธ API
make clean        # ะัะธััะบะฐ volume ะธ ะบััะฐ
```

---

## ๐ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
gorkycode/
โโโ backend/
โ   โโโ app/
โ   โ   โโโ api/
โ   โ   โ   โโโ v1/
โ   โ   โ       โโโ router.py
โ   โ   โ       โโโ endpoints/
โ   โ   โ           โโโ embedding.py
โ   โ   โ           โโโ route.py
โ   โ   โโโ core/
โ   โ   โ   โโโ config.py
โ   โ   โ   โโโ database.py
โ   โ   โโโ models/
โ   โ   โ   โโโ poi.py
โ   โ   โ   โโโ schemas.py
โ   โ   โโโ services/
โ   โ   โ   โโโ embedding.py
โ   โ   โ   โโโ ranking.py
โ   โ   โ   โโโ route_planner.py
โ   โ   โ   โโโ llm.py
โ   โ   โโโ main.py
โ   โโโ scripts/
โ   โ   โโโ load_pois.py
โ   โโโ pyproject.toml
โ   โโโ Dockerfile
โโโ frontend/
โ   โโโ src/
โ   โ   โโโ api/
โ   โ   โ   โโโ client.ts
โ   โ   โโโ components/
โ   โ   โ   โโโ RouteForm.tsx
โ   โ   โ   โโโ RouteDisplay.tsx
โ   โ   โโโ types/
โ   โ   โ   โโโ index.ts
โ   โ   โโโ App.tsx
โ   โ   โโโ main.tsx
โ   โโโ package.json
โ   โโโ Dockerfile
โโโ data/
โ   โโโ poi.json
โโโ docker-compose.yml
โโโ Makefile
โโโ README.md
```

---

## ๐ API Endpoints

### `POST /api/v1/route/plan`

ะะตะฝะตัะฐัะธั ะฟะตััะพะฝะฐะปัะฝะพะณะพ ะฟะตัะตะณะพ ะผะฐัััััะฐ.

**ะะฐะฟัะพั:**

```json
{
  "interests": "street-art, panoramas, coffee",
  "hours": 3.0,
  "start_lat": 56.3287,
  "start_lon": 44.002,
  "social_mode": "solo",
  "coffee_preference": 90,
  "intensity": "medium"
}
```

**ะัะฒะตั:**

```json
{
  "summary": "ะะฝัะตัะตัะฝะพะต ะฒะฒะตะดะตะฝะธะต ะฒ ะผะฐััััั",
  "route": [
    {
      "order": 1,
      "poi_id": 123,
      "name": "ะะปะพัะฐะดั ะะธะฝะธะฝะฐ",
      "lat": 56.3287,
      "lon": 44.002,
      "why": "ะะตััะพะฝะฐะปัะฝะพะต ะพะฑัััะฝะตะฝะธะต",
      "tip": "ะกะพะฒะตั ะผะตััะฝะพะณะพ ะถะธัะตะปั",
      "est_visit_minutes": 20,
      "arrival_time": "2025-10-10T10:00:00Z",
      "leave_time": "2025-10-10T10:20:00Z",
      "is_coffee_break": false
    }
  ],
  "total_est_minutes": 180,
  "total_distance_km": 4.5,
  "notes": ["ะะปััะตัะฝะฐัะธะฒะฐ ะฝะฐ ะดะพะถะดะปะธะฒัะน ะดะตะฝั"],
  "atmospheric_description": "ะะพััะธัะตัะบะพะต ะพะฟะธัะฐะฝะธะต ะฟัะพะณัะปะบะธ"
}
```

### `POST /api/v1/embedding/generate`

ะะตะฝะตัะฐัะธั ัะตะบััะพะฒะพะณะพ ัะผะฑะตะดะดะธะฝะณะฐ ะดะปั ะบะตัะธัะพะฒะฐะฝะธั.

---

## ๐ง ML-ะฟะฐะนะฟะปะฐะนะฝ

1. **ะญะผะฑะตะดะดะธะฝะณ ะฟะพะปัะทะพะฒะฐัะตะปััะบะพะณะพ ะทะฐะฟัะพัะฐ** โ `sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2`
2. **ะะตะบัะพัะฝัะน ะฟะพะธัะบ** โ ะะพัะธะฝััะฝะพะต ััะพะดััะฒะพ + ะบะพััะตะบัะธัะพะฒะบะฐ ะฟะพ ัะพั. ัะตะถะธะผั ะธ ะธะฝัะตะฝัะธะฒะฝะพััะธ
3. **ะะฟัะธะผะธะทะฐัะธั ะผะฐัััััะฐ** โ ะะฐะดะฝัะน ะฐะปะณะพัะธัะผ ะฑะปะธะถะฐะนัะตะณะพ ัะพัะตะดะฐ ั ะพะณัะฐะฝะธัะตะฝะธะตะผ ะฟะพ ะฒัะตะผะตะฝะธ
4. **ะััะฐะฒะบะฐ ะบะพัะตะนะฝัั ัะพัะตะบ** โ ะะดะฐะฟัะธะฒะฝะพะต ะดะพะฑะฐะฒะปะตะฝะธะต ะฟะพ ะฟัะตะดะฟะพััะตะฝะธัะผ ะฟะพะปัะทะพะฒะฐัะตะปั
5. **LLM-ะพะฑัััะฝะตะฝะธะต** โ Claude Sonnet 4 ะณะตะฝะตัะธััะตั ะฟะตััะพะฝะฐะปัะฝัะต ะฟัะธัะธะฝั ะธ ัะพะฒะตัั

---

## ๐ ะะปััะตะฒัะต ะฒะพะทะผะพะถะฝะพััะธ

- โ **ะะดะฐะฟัะธะฒะฝัะต ะบะพัะตะฑัะตะนะบะธ** โ ะฐะฒัะพ-ะฒััะฐะฒะบะฐ ะบะฐัะต ะฟะพ ะฟัะตะดะฟะพััะตะฝะธั
- ๐ฏ **ะะพะฝัะตะบััะฝะพะต ัะฐะฝะถะธัะพะฒะฐะฝะธะต** โ ััะธััะฒะฐะตั ัะพั. ัะตะถะธะผ ะธ ะธะฝัะตะฝัะธะฒะฝะพััั
- ๐บ๏ธ **ะะฝัะตัะฐะบัะธะฒะฝัะต ะบะฐััั** โ ะฒะธะทัะฐะปะธะทะฐัะธั ะฝะฐ Leaflet
- โก **Redis-ะบะตัะธัะพะฒะฐะฝะธะต** โ ะฑัััััะน ะดะพัััะฟ ะบ ัะผะฑะตะดะดะธะฝะณะฐะผ
- ๐ **ะะฑัััะฝะตะฝะธั ะพั LLM** โ ะตััะตััะฒะตะฝะฝัะน ัะทัะบ ะดะปั ะพะฑะพัะฝะพะฒะฐะฝะธั ะผะฐัััััะฐ
- ๐ **ะะตะฐะปัะฝะพะต ะฟะปะฐะฝะธัะพะฒะฐะฝะธะต** โ ะฟะพะด 2 ัะตะบัะฝะดั ะดะปั ัะผะฑะตะดะดะธะฝะณะพะฒ ะธ ัะฐะฝะถะธัะพะฒะฐะฝะธั, <5 ัะตะบัะฝะด ะฝะฐ ะฒะตัั ะผะฐััััั

---

## ๐ง ะะพะฝัะธะณััะฐัะธั

### ะะฐัััะพะนะบะธ ะฑัะบะตะฝะดะฐ (`backend/app/core/config.py`)

- `EMBEDDING_MODEL` โ ะผะพะดะตะปั sentence-transformers
- `LLM_PROVIDER` โ "anthropic" ะธะปะธ "openai"
- `LLM_MODEL` โ ะผะพะดะตะปั ะดะปั ะพะฑัััะฝะตะฝะธะน
- `DEFAULT_WALK_SPEED_KMH` โ ััะตะดะฝัั ัะบะพัะพััั ะฟะตัะตะณะพ ะดะฒะธะถะตะฝะธั

### ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั

ะกะผ. `.env.example` ะดะปั ะฒัะตั ะพะฟัะธะน.

---

## ๐ ะะพะฑะฐะฒะปะตะฝะธะต ะฝะพะฒัั POI

1. ะะตะดะฐะบัะธััะตะผ `data/poi.json`:

```json
{
  "id": 9,
  "name": "ะะพะฒะพะต ะผะตััะพ",
  "lat": 56.xxx,
  "lon": 44.xxx,
  "category": "ะผัะทะตะน",
  "tags": ["ะธัะบััััะฒะพ", "ัะพะฒัะตะผะตะฝะฝะพะต"],
  "description": "ะะฟะธัะฐะฝะธะต ะฝะฐ ััััะบะพะผ",
  "avg_visit_minutes": 45,
  "rating": 4.5
}
```

2. ะะตัะตะทะฐะณััะถะฐะตะผ ะดะฐะฝะฝัะต:

```bash
docker compose exec backend poetry run python scripts/load_pois.py
```

---

## ๐งช ะขะตััะธัะพะฒะฐะฝะธะต

```bash
docker compose exec backend poetry run pytest
```

---

## ๐จ ะะฐะทัะฐะฑะพัะบะฐ ััะพะฝัะตะฝะดะฐ

ะะฐะฑะพัะฐะตั ะฝะฐ `http://localhost:5173` ั ะฒะบะปัััะฝะฝะพะน ะณะพัััะตะน ะฟะตัะตะทะฐะณััะทะบะพะน.

**ะัะพะฑะตะฝะฝะพััะธ:**

- ะงะธัััะน ะผะธะฝะธะผะฐะปะธััะธัะฝัะน UI
- ะะดะฐะฟัะธะฒะฝัะน ะดะธะทะฐะนะฝ (ะฟะพะด ะผะพะฑะธะปัะฝัะต ััััะพะนััะฒะฐ)
- ะะฐะปะธะดะฐัะธั ัะพัะผ ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ
- ะะฝัะตัะฐะบัะธะฒะฝัะต ะบะฐััั Leaflet
- ะกะพััะพัะฝะธั ะทะฐะณััะทะบะธ ะธ ะพะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ
