# ğŸŒ AI-Tourist ĞĞ¸Ğ¶Ğ½Ğ¸Ğ¹ ĞĞ¾Ğ²Ğ³Ğ¾Ñ€Ğ¾Ğ´

**Production-ready AI-Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰Ğ½Ğ¸Ğº Ğ´Ğ»Ñ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… Ğ¿ĞµÑˆĞ¸Ñ… Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¾Ğ² Ñ Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ½Ğ¾Ğ¹ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ¾Ğ¹ Ğ½Ğ° Kubernetes**

[![Kubernetes](https://img.shields.io/badge/Kubernetes-1.30+-326CE5?logo=kubernetes)](https://kubernetes.io/)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.115+-009688?logo=fastapi)](https://fastapi.tiangolo.com/)
[![React](https://img.shields.io/badge/React-18.3+-61DAFB?logo=react)](https://react.dev/)
[![Python](https://img.shields.io/badge/Python-3.11+-3776AB?logo=python)](https://www.python.org/)

Ğ˜Ğ½Ñ‚ĞµĞ»Ğ»ĞµĞºÑ‚ÑƒĞ°Ğ»ÑŒĞ½Ğ°Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ Ñ‚ÑƒÑ€Ğ¸ÑÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¾Ğ² Ñ ML-Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸ÑĞ¼Ğ¸, ÑĞ¼Ğ±ĞµĞ´Ğ´Ğ¸Ğ½Ğ³Ğ°Ğ¼Ğ¸ Ğ¿Ñ€ĞµĞ´Ğ¿Ğ¾Ñ‡Ñ‚ĞµĞ½Ğ¸Ğ¹ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ, Ğ¾Ğ±ÑŠÑÑĞ½ĞµĞ½Ğ¸ÑĞ¼Ğ¸ Ğ¾Ñ‚ LLM Ğ¸ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸ĞµĞ¹ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¾Ğ² Ğ² Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ¼ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸.

---

## ğŸ“‹ Ğ¡Ğ¾Ğ´ĞµÑ€Ğ¶Ğ°Ğ½Ğ¸Ğµ

- [ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸](#-ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ-Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸)
- [ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°](#-Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°)
- [Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ÑÑ‚ĞµĞº](#-Ñ‚ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹-ÑÑ‚ĞµĞº)
- [Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚](#-Ğ±Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹-ÑÑ‚Ğ°Ñ€Ñ‚)
- [Kubernetes Deployment](#-kubernetes-deployment)
- [ĞœĞ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑÑ‹](#-Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑÑ‹)
- [ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ Ğ¸ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸](#-Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³-Ğ¸-Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸)
- [API Reference](#-api-reference)
- [Ğ Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°](#-Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°)
- [Production Checklist](#-production-checklist)

---

## ğŸ¯ ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸

### Ğ”Ğ»Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
- ğŸ—ºï¸ **ĞŸĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ñ‹** â€” Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ½Ğ° Ğ¾ÑĞ½Ğ¾Ğ²Ğµ Ğ¸Ğ½Ñ‚ĞµÑ€ĞµÑĞ¾Ğ² Ğ¸ Ğ¿Ñ€ĞµĞ´Ğ¿Ğ¾Ñ‡Ñ‚ĞµĞ½Ğ¸Ğ¹
- â˜• **Ğ£Ğ¼Ğ½Ñ‹Ğµ ĞºĞ¾Ñ„ĞµĞ±Ñ€ĞµĞ¹ĞºĞ¸** â€” Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ²ÑÑ‚Ğ°Ğ²ĞºĞ° ĞºĞ°Ñ„Ğµ Ğ¿Ğ¾ Ñ€Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ Ğ¸ Ğ¿Ñ€ĞµĞ´Ğ¿Ğ¾Ñ‡Ñ‚ĞµĞ½Ğ¸ÑĞ¼
- ğŸ¨ **ĞšĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ½Ğ°Ñ Ğ°Ğ´Ğ°Ğ¿Ñ‚Ğ°Ñ†Ğ¸Ñ** â€” ÑƒÑ‡ĞµÑ‚ ÑĞ¾Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ñ€ĞµĞ¶Ğ¸Ğ¼Ğ° (solo/Ğ³Ñ€ÑƒĞ¿Ğ¿Ğ°) Ğ¸ Ğ¸Ğ½Ñ‚ĞµĞ½ÑĞ¸Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ¿Ñ€Ğ¾Ğ³ÑƒĞ»ĞºĞ¸
- ğŸ’¬ **AI-Ğ¾Ğ±ÑŠÑÑĞ½ĞµĞ½Ğ¸Ñ** â€” ĞµÑÑ‚ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ğ¾ÑĞ·Ñ‹Ñ‡Ğ½Ñ‹Ğµ Ğ¿Ğ¾ÑÑĞ½ĞµĞ½Ğ¸Ñ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ° ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¹ Ñ‚Ğ¾Ñ‡ĞºĞ¸ Ğ¾Ñ‚ Claude/GPT
- ğŸ“ **Ğ˜Ğ½Ñ‚ĞµÑ€Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ°Ñ ĞºĞ°Ñ€Ñ‚Ğ°** â€” Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ° Ñ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğ¼Ğ¸ Ğ¼ĞµÑ‚ĞºĞ°Ğ¼Ğ¸
- âš¡ **ĞœĞ³Ğ½Ğ¾Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¾Ñ‚ĞºĞ»Ğ¸Ğº** â€” Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ° Ğ·Ğ° 2-5 ÑĞµĞºÑƒĞ½Ğ´

### Ğ”Ğ»Ñ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ°
- ğŸ—ï¸ **ĞœĞ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ½Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°** â€” 5 Ğ½ĞµĞ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ñ‹Ñ… gRPC-ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²
- â˜¸ï¸ **Kubernetes-native** â€” production-ready deployment Ñ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸ĞµĞ¼
- ğŸ“Š **Observability** â€” Prometheus Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸ + Grafana Ğ´Ğ°ÑˆĞ±Ğ¾Ñ€Ğ´Ñ‹
- ğŸ”’ **Security** â€” Network Policies, RBAC, ÑĞµĞºÑ€ĞµÑ‚Ñ‹ Ğ² Kubernetes Secrets
- ğŸš€ **High Availability** â€” HPA, Pod Disruption Budgets, health checks
- ğŸ³ **One-command deploy** â€” `make k8s-apply`

---

## ğŸ— ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

### ĞĞ±Ñ‰Ğ°Ñ ÑÑ…ĞµĞ¼Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Kubernetes Cluster                       â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   Frontend    â”‚    â”‚         Gateway (FastAPI)          â”‚   â”‚
â”‚  â”‚   (React)     â”‚â—„â”€â”€â”€â”¤    HPA: 2-4 replicas              â”‚   â”‚
â”‚  â”‚   2 replicas  â”‚    â”‚    Port: 8000                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                    â”‚                             â”‚
â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚                         â–¼          â–¼          â–¼                 â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚       â”‚            gRPC Microservices                    â”‚       â”‚
â”‚       â”‚                                                  â”‚       â”‚
â”‚       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚       â”‚
â”‚       â”‚  â”‚ML Service  â”‚  â”‚LLM Service â”‚  â”‚ Routing  â”‚  â”‚       â”‚
â”‚       â”‚  â”‚:50051      â”‚  â”‚:50052      â”‚  â”‚ :50053   â”‚  â”‚       â”‚
â”‚       â”‚  â”‚Embeddings  â”‚  â”‚Claude/GPT  â”‚  â”‚ TSP opt  â”‚  â”‚       â”‚
â”‚       â”‚  â”‚HPA: 1-3    â”‚  â”‚2 replicas  â”‚  â”‚1 replica â”‚  â”‚       â”‚
â”‚       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚       â”‚
â”‚       â”‚                                                  â”‚       â”‚
â”‚       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”‚       â”‚
â”‚       â”‚  â”‚ Geocoding  â”‚                                 â”‚       â”‚
â”‚       â”‚  â”‚ :50054     â”‚                                 â”‚       â”‚
â”‚       â”‚  â”‚ 2GIS API   â”‚                                 â”‚       â”‚
â”‚       â”‚  â”‚ 1 replica  â”‚                                 â”‚       â”‚
â”‚       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚       â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                         â”‚          â”‚                             â”‚
â”‚                         â–¼          â–¼                             â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚       â”‚  PostgreSQL      Redis      Prometheus â”‚                â”‚
â”‚       â”‚  (Persistent)  (Persistent)  + Grafana â”‚                â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ML Pipeline

```
User Request â†’ Embedding Generation â†’ Vector Search â†’ Route Optimization
     â†“                  â†“                    â†“                â†“
  Interests     sentence-transformers    Cosine         Greedy TSP
   Tags           (384-dim vectors)      Similarity    + Time constraints
   Prefs                                                      â†“
                                                     Coffee Break Insertion
                                                              â†“
                                                     LLM Explanation Generation
                                                              â†“
                                                     Route with Rich Context
```

---

## ğŸ›  Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ÑÑ‚ĞµĞº

### Backend & Services

| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ | Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸ | ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ |
|-----------|------------|-----------|
| **Gateway** | FastAPI + Python 3.11 + Poetry | Orchestration, REST API, gRPC clients |
| **ML Service** | sentence-transformers + torch | Ğ­Ğ¼Ğ±ĞµĞ´Ğ´Ğ¸Ğ½Ğ³Ğ¸ Ñ‚ĞµĞºÑÑ‚Ğ° (384-dim vectors) |
| **LLM Service** | Anthropic Claude / OpenAI | Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ¾Ğ±ÑŠÑÑĞ½ĞµĞ½Ğ¸Ğ¹ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ° |
| **Routing Service** | NumPy + scikit-learn | ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ TSP + ĞºĞ¾ÑĞ¸Ğ½ÑƒÑĞ½Ğ¾Ğµ ÑÑ…Ğ¾Ğ´ÑÑ‚Ğ²Ğ¾ |
| **Geocoding Service** | 2GIS API + httpx | Ğ“ĞµĞ¾ĞºĞ¾Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ°Ğ´Ñ€ĞµÑĞ¾Ğ² Ğ¸ POI |

### Infrastructure

| Ğ¡Ğ»Ğ¾Ğ¹ | Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸ |
|------|------------|
| **Orchestration** | Kubernetes 1.30+, Minikube |
| **Container Runtime** | Docker 24+ |
| **Service Mesh** | gRPC (Protocol Buffers) |
| **Databases** | PostgreSQL 16 + Redis 7 |
| **Monitoring** | Prometheus + Grafana |
| **Autoscaling** | Horizontal Pod Autoscaler (HPA) |
| **Security** | Network Policies, RBAC, Secrets |
| **CI/CD** | Makefile automation |

### Frontend

| Layer | Tech |
|-------|------|
| **Framework** | React 18 + TypeScript + Vite |
| **Styling** | Tailwind CSS |
| **Maps** | React-Leaflet + OpenStreetMap |
| **State** | React Hooks (useState, useEffect) |
| **HTTP Client** | Fetch API |

---

## ğŸš€ Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚

### Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ½Ñ‹Ğµ Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

- **CPU**: 4+ cores (8 recommended)
- **RAM**: 8GB+ (16GB recommended)
- **Disk**: 20GB+ ÑĞ²Ğ¾Ğ±Ğ¾Ğ´Ğ½Ğ¾Ğ³Ğ¾ Ğ¼ĞµÑÑ‚Ğ°
- **OS**: Linux, macOS, Windows (WSL2)

### ĞŸÑ€ĞµĞ´Ğ²Ğ°Ñ€Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ°Ñ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ°

```bash
# Kubernetes (Minikube)
curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64
sudo install minikube-linux-amd64 /usr/local/bin/minikube

# Docker
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh

# kubectl
curl -LO "https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl"
sudo install kubectl /usr/local/bin/kubectl
```

### Deployment Ğ·Ğ° 3 ÑˆĞ°Ğ³Ğ°

```bash
# 1. ĞšĞ»Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¹
git clone https://github.com/VisageDvachevsky/gorkycode
cd gorkycode

# 2. ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ğµ
cp .env.example .env
# ĞÑ‚Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€ÑƒĞ¹ .env Ğ¸ Ğ´Ğ¾Ğ±Ğ°Ğ²ÑŒ API ĞºĞ»ÑÑ‡Ğ¸:
# ANTHROPIC_API_KEY=sk-ant-...
# Ğ¸Ğ»Ğ¸ OPENAI_API_KEY=sk-...
# TWOGIS_API_KEY=...

# 3. Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ ĞºĞ»Ğ°ÑÑ‚ĞµÑ€ Ğ¸ Ğ·Ğ°Ğ´ĞµĞ¿Ğ»Ğ¾Ğ¸Ñ‚ÑŒ
minikube start --cpus=4 --memory=8192
make k8s-apply

# ĞŸĞ¾Ğ´Ğ¾Ğ¶Ğ´Ğ¸ 2-3 Ğ¼Ğ¸Ğ½ÑƒÑ‚Ñ‹ Ğ¿Ğ¾ĞºĞ° Ğ²ÑĞµ Ğ¿Ğ¾Ğ´Ñ‹ Ğ·Ğ°Ğ¿ÑƒÑÑ‚ÑÑ‚ÑÑ
kubectl get pods -n aitourist --watch
```

### Ğ”Ğ¾ÑÑ‚ÑƒĞ¿ Ğº ÑĞµÑ€Ğ²Ğ¸ÑĞ°Ğ¼

```bash
# Port forwarding
make k8s-port

# Ğ˜Ğ»Ğ¸ Ğ²Ñ€ÑƒÑ‡Ğ½ÑƒÑ:
kubectl port-forward -n aitourist svc/gateway 8000:8000 &
kubectl port-forward -n aitourist svc/frontend 3000:80 &
kubectl port-forward -n aitourist svc/grafana 3001:3000 &
```

ĞÑ‚ĞºÑ€Ğ¾Ğ¹ Ğ² Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€Ğµ:
- **API Documentation**: http://localhost:8000/docs
- **Frontend App**: http://localhost:3000
- **Grafana Monitoring**: http://localhost:3001

---

## â˜¸ï¸ Kubernetes Deployment

### Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¼Ğ°Ğ½Ğ¸Ñ„ĞµÑÑ‚Ğ¾Ğ²

```
k8s/
â”œâ”€â”€ 00-namespace.yaml           # Namespace aitourist
â”œâ”€â”€ 01-configmap.yaml           # ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ
â”œâ”€â”€ 02-secrets.yaml             # Ğ¡ĞµĞºÑ€ĞµÑ‚Ñ‹ (Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸)
â”œâ”€â”€ 03-pvc.yaml                 # Persistent Volume Claims
â”œâ”€â”€ 04-db-init.yaml             # Init ÑĞºÑ€Ğ¸Ğ¿Ñ‚Ñ‹ Ğ‘Ğ”
â”œâ”€â”€ 05-network-policy.yaml      # Ğ¡ĞµÑ‚ĞµĞ²Ñ‹Ğµ Ğ¿Ğ¾Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ¸ Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚Ğ¸
â”œâ”€â”€ 06-pod-disruption-budget.yaml # PDB Ğ´Ğ»Ñ HA
â”œâ”€â”€ 07-rbac.yaml                # Service Accounts & Roles
â”œâ”€â”€ 10-postgres.yaml            # PostgreSQL Deployment
â”œâ”€â”€ 11-redis.yaml               # Redis Deployment
â”œâ”€â”€ 12-ml-service.yaml          # ML Service + HPA
â”œâ”€â”€ 13-gateway.yaml             # Gateway API + HPA
â”œâ”€â”€ 14-frontend.yaml            # React Frontend
â”œâ”€â”€ 15-llm-service.yaml         # LLM Service
â”œâ”€â”€ 16-routing-service.yaml     # Routing Service
â”œâ”€â”€ 17-geocoding-service.yaml   # Geocoding Service
â”œâ”€â”€ 20-ingress.yaml             # Ingress Controller
â”œâ”€â”€ 30-monitoring.yaml          # Prometheus + Grafana
â”œâ”€â”€ 31-servicemonitor.yaml      # ServiceMonitors (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)
â””â”€â”€ 40-backup.yaml              # Backup CronJob
```

### Resource Allocation

| Service | CPU Request | CPU Limit | Memory Request | Memory Limit | Replicas |
|---------|------------|-----------|----------------|--------------|----------|
| Gateway | 100m | 1000m | 128Mi | 512Mi | 2-4 (HPA) |
| ML Service | 200m | 2000m | 512Mi | 2Gi | 1-3 (HPA) |
| LLM Service | 100m | 500m | 128Mi | 512Mi | 2 |
| Routing | 100m | 500m | 128Mi | 256Mi | 1 |
| Geocoding | 100m | 500m | 128Mi | 256Mi | 1 |
| PostgreSQL | 250m | 1000m | 256Mi | 1Gi | 1 |
| Redis | 100m | 500m | 64Mi | 256Mi | 1 |
| Frontend | 50m | 200m | 32Mi | 128Mi | 2 |

**Total cluster requirements:**
- CPU: ~1000m (1 core) at idle, ~4000m (4 cores) under load
- Memory: ~2.5Gi at idle, ~6Gi under load

### ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ (HPA)

**Gateway HPA:**
```yaml
minReplicas: 2
maxReplicas: 4
metrics:
  - CPU: 70%
  - Memory: 85%
```

**ML Service HPA:**
```yaml
minReplicas: 1
maxReplicas: 3
metrics:
  - CPU: 70%
  - Memory: 80%
```

### High Availability Features

- âœ… **Pod Disruption Budgets** â€” Ğ¼Ğ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ 1 Ğ¿Ğ¾Ğ´ Ğ²ÑĞµĞ³Ğ´Ğ° Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½
- âœ… **Health Checks** â€” liveness & readiness probes
- âœ… **Anti-affinity** â€” Ñ€Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ´Ğ¾Ğ² Ğ¿Ğ¾ ÑƒĞ·Ğ»Ğ°Ğ¼
- âœ… **Persistent Storage** â€” PVC Ğ´Ğ»Ñ PostgreSQL Ğ¸ Redis
- âœ… **Network Policies** â€” Ğ¸Ğ·Ğ¾Ğ»ÑÑ†Ğ¸Ñ ÑĞµÑ‚ĞµĞ²Ğ¾Ğ³Ğ¾ Ñ‚Ñ€Ğ°Ñ„Ğ¸ĞºĞ°
- âœ… **RBAC** â€” Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ°Ğ²Ğ° Service Accounts

### ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ Ğ¸ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

```bash
# Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ Ğ²ÑĞµÑ… Ñ€ĞµÑÑƒÑ€ÑĞ¾Ğ²
make k8s-status

# Ğ›Ğ¾Ğ³Ğ¸ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ğ¾Ğ³Ğ¾ ÑĞµÑ€Ğ²Ğ¸ÑĞ°
make k8s-logs          # Gateway
make k8s-logs-ml       # ML Service
make k8s-logs-all      # Ğ’ÑĞµ ÑĞµÑ€Ğ²Ğ¸ÑÑ‹

# ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸ Ñ€ĞµÑÑƒÑ€ÑĞ¾Ğ²
kubectl top nodes
kubectl top pods -n aitourist

# Ğ”Ğ¾ÑÑ‚ÑƒĞ¿ Ğº Grafana
kubectl port-forward -n aitourist svc/grafana 3001:3000
# http://localhost:3001 (admin/[GRAFANA_PASSWORD])
```

---

## ğŸ”¬ ĞœĞ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑÑ‹

### Gateway (FastAPI)

**Endpoint:** `http://gateway:8000`

**Responsibilities:**
- REST API Ğ´Ğ»Ñ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ¾Ğ²
- ĞÑ€ĞºĞµÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ gRPC-Ğ²Ñ‹Ğ·Ğ¾Ğ²Ğ¾Ğ²
- Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ²Ñ…Ğ¾Ğ´Ğ½Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
- ĞĞ³Ñ€ĞµĞ³Ğ°Ñ†Ğ¸Ñ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ¾Ğ² Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²
- Database operations (PostgreSQL)
- Cache management (Redis)

**gRPC Clients:**
```python
ml_client â†’ ML Service (embeddings)
llm_client â†’ LLM Service (explanations)
routing_client â†’ Routing Service (TSP)
geocoding_client â†’ Geocoding Service (2GIS)
```

### ML Service

**Endpoint:** `grpc://ml-service:50051`

**Responsibilities:**
- Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ text embeddings (384-dim)
- ĞœĞ¾Ğ´ĞµĞ»ÑŒ: `sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2`
- ĞšĞµÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ÑĞ¼Ğ±ĞµĞ´Ğ´Ğ¸Ğ½Ğ³Ğ¾Ğ² Ğ² Redis
- Batch processing Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ°
- ĞšĞ¾ÑĞ¸Ğ½ÑƒÑĞ½Ğ¾Ğµ ÑÑ…Ğ¾Ğ´ÑÑ‚Ğ²Ğ¾ Ğ´Ğ»Ñ Ğ²ĞµĞºÑ‚Ğ¾Ñ€Ğ¾Ğ²

**Proto:**
```protobuf
service EmbeddingService {
  rpc GenerateEmbedding(EmbeddingRequest) returns (EmbeddingResponse);
  rpc GenerateEmbeddingBatch(EmbeddingBatchRequest) returns (EmbeddingBatchResponse);
  rpc CosineSimilarity(SimilarityRequest) returns (SimilarityResponse);
  rpc HealthCheck(HealthCheckRequest) returns (HealthCheckResponse);
}
```

### LLM Service

**Endpoint:** `grpc://llm-service:50052`

**Responsibilities:**
- Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ½Ñ‹Ñ… Ğ¾Ğ±ÑŠÑÑĞ½ĞµĞ½Ğ¸Ğ¹ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ°
- ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° Anthropic Claude & OpenAI GPT
- ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚Ñ‹ Ğ´Ğ»Ñ Ñ‚ÑƒÑ€Ğ¸ÑÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ğ¹
- ĞÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ°Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)
- Retry logic Ñ exponential backoff

**Features:**
- Atmospheric descriptions
- Per-POI reasoning ("Ğ¿Ğ¾Ñ‡ĞµĞ¼Ñƒ Ğ¸Ğ¼ĞµĞ½Ğ½Ğ¾ ÑÑ‚Ğ° Ñ‚Ğ¾Ñ‡ĞºĞ°?")
- Local tips and recommendations
- Alternative suggestions

### Routing Service

**Endpoint:** `grpc://routing-service:50053`

**Responsibilities:**
- ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾Ñ€ÑĞ´ĞºĞ° Ñ‚Ğ¾Ñ‡ĞµĞº (Greedy TSP)
- Ğ Ğ°ÑÑ‡ĞµÑ‚ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸ Ğ¿Ñ€Ğ¾Ñ…Ğ¾Ğ¶Ğ´ĞµĞ½Ğ¸Ñ
- Ğ£Ñ‡ĞµÑ‚ walking speed
- Ğ’ÑÑ‚Ğ°Ğ²ĞºĞ° ĞºĞ¾Ñ„ĞµĞ±Ñ€ĞµĞ¹ĞºĞ¾Ğ²
- Distance matrix calculation

**Algorithm:**
```
1. Start from user location
2. Greedy nearest neighbor selection
3. Time constraint validation
4. Coffee break insertion (based on preference)
5. Final route with timestamps
```

### Geocoding Service

**Endpoint:** `grpc://geocoding-service:50054`

**Responsibilities:**
- Ğ“ĞµĞ¾ĞºĞ¾Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ°Ğ´Ñ€ĞµÑĞ¾Ğ² (2GIS API)
- Reverse geocoding
- POI search
- Distance calculation
- Rate limiting & caching

---

## ğŸ“Š ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ Ğ¸ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸

### Prometheus Metrics

**Ğ”Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹Ğµ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸:**
```
# HTTP Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸
http_requests_total
http_request_duration_seconds
http_requests_in_progress

# gRPC Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸
grpc_server_handled_total
grpc_server_handling_seconds

# Custom Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸
route_generation_duration_seconds
embedding_cache_hit_ratio
llm_api_calls_total
```

### Grafana Dashboards

**Pre-configured:**
- Gateway API Performance
- ML Service Embeddings Stats
- Database Connection Pool
- Redis Cache Performance
- Pod Resource Usage
- HPA Scaling Events

**Access:**
```bash
kubectl port-forward -n aitourist svc/grafana 3001:3000
# Login: admin / [GRAFANA_PASSWORD from secrets]
```

---

## ğŸ”Œ API Reference

### POST `/api/v1/route/plan`

Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ°.

**Request:**
```json
{
  "interests": "street-art, history, panoramas",
  "hours": 3.5,
  "start_lat": 56.3287,
  "start_lon": 44.002,
  "social_mode": "solo",
  "coffee_preference": 80,
  "intensity": "medium"
}
```

**Response:**
```json
{
  "summary": "Ğ˜Ğ½Ñ‚ĞµĞ»Ğ»ĞµĞºÑ‚ÑƒĞ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ²Ğ²ĞµĞ´ĞµĞ½Ğ¸Ğµ Ğ² Ğ²Ğ°Ñˆ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚",
  "route": [
    {
      "order": 1,
      "poi_id": 5,
      "name": "ĞŸĞ»Ğ¾Ñ‰Ğ°Ğ´ÑŒ ĞœĞ¸Ğ½Ğ¸Ğ½Ğ° Ğ¸ ĞŸĞ¾Ğ¶Ğ°Ñ€ÑĞºĞ¾Ğ³Ğ¾",
      "lat": 56.3287,
      "lon": 44.002,
      "category": "landmark",
      "tags": ["history", "architecture"],
      "why": "Ğ¡ĞµÑ€Ğ´Ñ†Ğµ ĞĞ¸Ğ¶Ğ½ĞµĞ³Ğ¾ ĞĞ¾Ğ²Ğ³Ğ¾Ñ€Ğ¾Ğ´Ğ° Ñ Ğ±Ğ¾Ğ³Ğ°Ñ‚Ğ¾Ğ¹ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸ĞµĞ¹...",
      "tip": "ĞŸÑ€Ğ¸Ñ…Ğ¾Ğ´Ğ¸Ñ‚Ğµ Ğ½Ğ° Ñ€Ğ°ÑÑĞ²ĞµÑ‚Ğµ Ğ´Ğ»Ñ Ğ»ÑƒÑ‡ÑˆĞ¸Ñ… Ñ„Ğ¾Ñ‚Ğ¾",
      "est_visit_minutes": 20,
      "arrival_time": "2025-10-15T10:00:00Z",
      "leave_time": "2025-10-15T10:20:00Z",
      "is_coffee_break": false
    },
    {
      "order": 2,
      "poi_id": 42,
      "name": "Coffee Bean",
      "is_coffee_break": true,
      "est_visit_minutes": 15
    }
  ],
  "total_est_minutes": 210,
  "total_distance_km": 4.8,
  "atmospheric_description": "Ğ­Ğ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ğ³ÑƒĞ»ĞºĞ¸...",
  "notes": ["ĞĞ»ÑŒÑ‚ĞµÑ€Ğ½Ğ°Ñ‚Ğ¸Ğ²Ğ°: ĞœÑƒĞ·ĞµĞ¹ Ğ½Ğ° Ğ´Ğ¾Ğ¶Ğ´Ğ»Ğ¸Ğ²Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ"]
}
```

**ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:**

| ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€ | Ğ¢Ğ¸Ğ¿ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ | ĞŸĞ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ |
|----------|-----|----------|--------------|
| `interests` | string | Ğ˜Ğ½Ñ‚ĞµÑ€ĞµÑÑ‹ Ñ‡ĞµÑ€ĞµĞ· Ğ·Ğ°Ğ¿ÑÑ‚ÑƒÑ | required |
| `hours` | float | Ğ–ĞµĞ»Ğ°ĞµĞ¼Ğ°Ñ Ğ´Ğ»Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ | 2.0-8.0 |
| `start_lat` | float | Ğ¨Ğ¸Ñ€Ğ¾Ñ‚Ğ° ÑÑ‚Ğ°Ñ€Ñ‚Ğ° | required |
| `start_lon` | float | Ğ”Ğ¾Ğ»Ğ³Ğ¾Ñ‚Ğ° ÑÑ‚Ğ°Ñ€Ñ‚Ğ° | required |
| `social_mode` | enum | "solo" / "group" | "solo" |
| `coffee_preference` | int | 0-100 (Ñ‡Ğ°ÑÑ‚Ğ¾Ñ‚Ğ° Ğ±Ñ€ĞµĞ¹ĞºĞ¾Ğ²) | 50 |
| `intensity` | enum | "low" / "medium" / "high" | "medium" |

---

## ğŸ’» Ğ Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°

### Makefile Commands

```bash
# Kubernetes Operations
make k8s-apply          # Deploy to cluster
make k8s-delete         # Delete all resources
make k8s-status         # Check pods/services status
make k8s-restart        # Restart all deployments
make k8s-port           # Port forward (auto-cleanup)
make k8s-port-stop      # Stop port forwarding

# Logs & Debugging
make k8s-logs           # Gateway logs
make k8s-logs-ml        # ML Service logs
make k8s-logs-all       # All services logs
make k8s-shell-gateway  # Exec into Gateway pod
make k8s-shell-ml       # Exec into ML pod

# Build & Push
make build              # Build Docker images
make k8s-build          # Build for Kubernetes

# Cleanup
make clean              # Remove build artifacts
make k8s-delete         # Delete k8s namespace
```

### Local Development (Docker Compose)

```bash
# Ğ”Ğ»Ñ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ Ğ±ĞµĞ· Kubernetes
make dev-up             # Start dev environment
make dev-down           # Stop dev environment
make dev-logs           # View logs

# Ğ˜Ğ»Ğ¸ Ğ½Ğ°Ğ¿Ñ€ÑĞ¼ÑƒÑ:
docker-compose up -d
docker-compose logs -f
```

### Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ½Ğ¾Ğ²Ñ‹Ñ… POI

1. Ğ ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€ÑƒĞ¹ `data/poi.json`:
```json
{
  "id": 99,
  "name": "ĞĞ¾Ğ²Ğ°Ñ Ñ‚Ğ¾Ñ‡ĞºĞ° Ğ¸Ğ½Ñ‚ĞµÑ€ĞµÑĞ°",
  "lat": 56.xxx,
  "lon": 44.xxx,
  "category": "museum",
  "tags": ["art", "modern"],
  "description": "ĞŸĞ¾Ğ»Ğ½Ğ¾Ğµ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ¼ĞµÑÑ‚Ğ°",
  "avg_visit_minutes": 45,
  "rating": 4.7
}
```

2. Ğ—Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸ Ğ² Ğ‘Ğ”:
```bash
kubectl exec -it -n aitourist deployment/gateway -- \
  poetry run python scripts/load_pois.py
```

### Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

```bash
# Unit tests
kubectl exec -it -n aitourist deployment/gateway -- \
  poetry run pytest tests/

# API tests
curl -X POST http://localhost:8000/api/v1/route/plan \
  -H "Content-Type: application/json" \
  -d @tests/fixtures/sample_request.json
```

---

## âœ… Production Checklist

### Security

- [ ] Ğ’ÑĞµ ÑĞµĞºÑ€ĞµÑ‚Ñ‹ Ğ² Kubernetes Secrets (Ğ½Ğµ Ğ² git!)
- [ ] Network Policies Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½Ñ‹
- [ ] RBAC Ñ Ğ¼Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¼Ğ¸ Ğ¿Ñ€Ğ°Ğ²Ğ°Ğ¼Ğ¸
- [ ] TLS Ğ´Ğ»Ñ Ingress (ĞµÑĞ»Ğ¸ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ)
- [ ] Database credentials Ñ€Ğ¾Ñ‚Ğ°Ñ†Ğ¸Ñ
- [ ] API rate limiting

### Reliability

- [ ] HPA Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½ Ğ¸ Ğ¿Ñ€Ğ¾Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½
- [ ] PDB Ğ´Ğ»Ñ ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ñ‹Ñ… ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²
- [ ] Health checks work
- [ ] Persistent storage Ğ´Ğ»Ñ Ğ‘Ğ”
- [ ] Backup CronJob Ğ°ĞºÑ‚Ğ¸Ğ²ĞµĞ½
- [ ] Graceful shutdown handling

### Monitoring

- [ ] Prometheus scraping Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚
- [ ] Grafana dashboards Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½Ñ‹
- [ ] Alerts configured (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)
- [ ] Logs aggregation (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾: ELK/Loki)
- [ ] Distributed tracing (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾: Jaeger)

### Performance

- [ ] Resource limits ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ñ‹
- [ ] Redis caching Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚
- [ ] Database indexes Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ñ‹
- [ ] Connection pooling Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½
- [ ] ML model preloaded Ğ¿Ñ€Ğ¸ ÑÑ‚Ğ°Ñ€Ñ‚Ğµ

### CI/CD (Recommended)

- [ ] GitHub Actions / GitLab CI
- [ ] Automated tests
- [ ] Docker registry (DockerHub/GCR/ECR)
- [ ] Helm charts (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)
- [ ] Canary deployments

---

## ğŸ› Troubleshooting

### Pods Ğ½Ğµ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°ÑÑ‚ÑÑ

```bash
# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ
kubectl describe pod -n aitourist <pod-name>

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒ Ğ»Ğ¾Ğ³Ğ¸
kubectl logs -n aitourist <pod-name>

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒ Ñ€ĞµÑÑƒÑ€ÑÑ‹ ĞºĞ»Ğ°ÑÑ‚ĞµÑ€Ğ°
kubectl top nodes
kubectl describe nodes
```

### ML Service Ğ¿Ğ°Ğ´Ğ°ĞµÑ‚

**Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¸Ñ‡Ğ¸Ğ½Ñ‹:**
- ĞĞµĞ´Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸ (Ğ½ÑƒĞ¶Ğ½Ğ¾ 2Gi limit)
- ĞœĞ¾Ğ´ĞµĞ»ÑŒ Ğ½Ğµ Ğ·Ğ°Ğ³Ñ€ÑƒĞ¶ĞµĞ½Ğ°
- ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹ Ñ protobuf Ğ²ĞµÑ€ÑĞ¸ĞµĞ¹

```bash
# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒ Ğ»Ğ¾Ğ³Ğ¸
kubectl logs -n aitourist -l app=ml-service --tail=50

# Ğ£Ğ²ĞµĞ»Ğ¸Ñ‡ÑŒ memory limit
kubectl patch deployment ml-service -n aitourist \
  -p '{"spec":{"template":{"spec":{"containers":[{"name":"ml-service","resources":{"limits":{"memory":"3Gi"}}}]}}}}'
```

### Gateway Ğ½Ğµ ĞºĞ¾Ğ½Ğ½ĞµĞºÑ‚Ğ¸Ñ‚ÑÑ Ğº gRPC ÑĞµÑ€Ğ²Ğ¸ÑĞ°Ğ¼

```bash
# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒ service endpoints
kubectl get endpoints -n aitourist

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒ network policies
kubectl get networkpolicies -n aitourist

# Test connection from Gateway pod
kubectl exec -it -n aitourist deployment/gateway -- \
  nc -zv ml-service 50051
```

### Ğ’Ñ‹ÑĞ¾ĞºĞ¾Ğµ Ğ¿Ğ¾Ñ‚Ñ€ĞµĞ±Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸

```bash
# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒ HPA ÑÑ‚Ğ°Ñ‚ÑƒÑ
kubectl get hpa -n aitourist

# Ğ£Ğ¼ĞµĞ½ÑŒÑˆĞ¸ max replicas ĞµÑĞ»Ğ¸ Ğ½ÑƒĞ¶Ğ½Ğ¾
kubectl patch hpa gateway-hpa -n aitourist \
  -p '{"spec":{"maxReplicas":3}}'

# Ğ˜Ğ»Ğ¸ ÑƒĞ²ĞµĞ»Ğ¸Ñ‡ÑŒ ĞºĞ»Ğ°ÑÑ‚ĞµÑ€
minikube stop
minikube delete
minikube start --cpus=6 --memory=12288
```

---

## ğŸ“š Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ñ€ĞµÑÑƒÑ€ÑÑ‹

- **Kubernetes Docs**: https://kubernetes.io/docs/
- **FastAPI Docs**: https://fastapi.tiangolo.com/
- **Sentence Transformers**: https://sbert.net/
- **Anthropic Claude**: https://docs.anthropic.com/
- **Prometheus**: https://prometheus.io/docs/

---

## ğŸ‘¥ Contributing

Pull requests Ğ¿Ñ€Ğ¸Ğ²ĞµÑ‚ÑÑ‚Ğ²ÑƒÑÑ‚ÑÑ! Ğ”Ğ»Ñ major changes ÑĞ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ issue Ğ´Ğ»Ñ Ğ¾Ğ±ÑÑƒĞ¶Ğ´ĞµĞ½Ğ¸Ñ.

**Development workflow:**
1. Fork Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¹
2. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹ feature branch (`git checkout -b feature/amazing-feature`)
3. Commit changes (`git commit -m 'Add amazing feature'`)
4. Push to branch (`git push origin feature/amazing-feature`)
5. ĞÑ‚ĞºÑ€Ğ¾Ğ¹ Pull Request

---

## ğŸ“ Credits

Developed by **Visage Dvachevsky** Ğ´Ğ»Ñ Ñ…Ğ°ĞºĞ°Ñ‚Ğ¾Ğ½Ğ° GorkyCode 2025

**Special thanks:**
- Anthropic Claude & OpenAI ChatGPT Ğ´Ğ»Ñ LLM capabilities
- Sentence Transformers community
- Kubernetes contributors
- ĞĞ¸Ğ¶Ğ½Ğ¸Ğ¹ ĞĞ¾Ğ²Ğ³Ğ¾Ñ€Ğ¾Ğ´ Ğ·Ğ° Ğ²Ğ´Ğ¾Ñ…Ğ½Ğ¾Ğ²ĞµĞ½Ğ¸Ğµ ğŸ›ï¸

---
