# ğŸ§­ AI-Tourist

**Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ñ‹Ğ¹ Ğº Ğ¿Ñ€Ğ¾Ğ´Ğ°ĞºÑˆĞµĞ½Ñƒ AI-Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰Ğ½Ğ¸Ğº Ğ´Ğ»Ñ Ğ¿ĞµÑˆĞ¸Ñ… Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¾Ğ² Ğ¿Ğ¾ ĞĞ¸Ğ¶Ğ½ĞµĞ¼Ñƒ ĞĞ¾Ğ²Ğ³Ğ¾Ñ€Ğ¾Ğ´Ñƒ**

Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµÑ‚ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ñ‹ Ğ¸Ğ· 3â€“5 Ñ‚Ğ¾Ñ‡ĞµĞº Ñ ML-Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸ÑĞ¼Ğ¸, Ğ¾Ğ±ÑŠÑÑĞ½ĞµĞ½Ğ¸ÑĞ¼Ğ¸ Ğ¾Ñ‚ LLM Ğ¸ Ğ¸Ğ½Ñ‚ĞµÑ€Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾Ğ¹ ĞºĞ°Ñ€Ñ‚Ğ¾Ğ¹.

---

## ğŸ— ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   React     â”‚â”€â”€â”€â”€â”€â–¶â”‚   FastAPI    â”‚â”€â”€â”€â”€â”€â–¶â”‚  PostgreSQL â”‚
â”‚  Ğ¤Ñ€Ğ¾Ğ½Ñ‚ĞµĞ½Ğ´   â”‚      â”‚   Ğ‘ÑĞºĞµĞ½Ğ´     â”‚      â”‚  + Redis    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”œâ”€â”€â–¶ Ğ¡ĞµÑ€Ğ²Ğ¸Ñ ÑĞ¼Ğ±ĞµĞ´Ğ´Ğ¸Ğ½Ğ³Ğ¾Ğ² (sentence-transformers)
                            â”œâ”€â”€â–¶ Ğ Ğ°Ğ½Ğ¶Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ (ĞºĞ¾ÑĞ¸Ğ½ÑƒÑĞ½Ğ¾Ğµ ÑÑ…Ğ¾Ğ´ÑÑ‚Ğ²Ğ¾)
                            â”œâ”€â”€â–¶ ĞŸĞ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ñ‰Ğ¸Ğº Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ° (ÑƒĞ¿Ñ€Ğ¾Ñ‰Ñ‘Ğ½Ğ½Ñ‹Ğ¹ TSP)
                            â””â”€â”€â–¶ LLM-ÑĞµÑ€Ğ²Ğ¸Ñ (Claude/GPT)
```

### Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ÑÑ‚ĞµĞº

| Ğ¡Ğ»Ğ¾Ğ¹            | Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸                                                   |
|-----------------|--------------------------------------------------------------|
| **Ğ¤Ñ€Ğ¾Ğ½Ñ‚ĞµĞ½Ğ´**    | React 18 + TypeScript + Vite + Tailwind CSS + React-Leaflet |
| **Ğ‘ÑĞºĞµĞ½Ğ´**      | FastAPI + Python 3.11 + Poetry                               |
| **Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…** | PostgreSQL 16 + Redis 7                                      |
| **ML**          | sentence-transformers + scikit-learn + numpy                 |
| **LLM**         | Anthropic Claude Sonnet 4 / OpenAI GPT-4                     |
| **DevOps**      | Docker Compose + Makefile                                    |

---

## ğŸš€ Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚

### Ğ¢Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

- Docker & Docker Compose
- API-ĞºĞ»ÑÑ‡Ğ¸: Anthropic Ğ¸Ğ»Ğ¸ OpenAI

### Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ°

1. **ĞšĞ»Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¹**

```bash
git clone https://github.com/VisageDvachevsky/gorkycode
cd gorkycode
```

2. **ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ğµ**

```bash
cp .env.example .env
# Ğ£ĞºĞ°Ğ¶Ğ¸Ñ‚Ğµ API-ĞºĞ»ÑÑ‡Ğ¸:
# ANTHROPIC_API_KEY=sk-ant-...
# Ğ¸Ğ»Ğ¸
# OPENAI_API_KEY=sk-...
```

3. **Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Ğ²ÑĞµ ÑĞµÑ€Ğ²Ğ¸ÑÑ‹**

```bash
make up
```

ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ° Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚:

- Ğ¡Ğ±Ğ¾Ñ€ĞºÑƒ Docker-Ğ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²
- Ğ—Ğ°Ğ¿ÑƒÑĞº PostgreSQL, Redis, Ğ‘ÑĞºĞµĞ½Ğ´Ğ°, Ğ¤Ñ€Ğ¾Ğ½Ñ‚ĞµĞ½Ğ´Ğ°
- Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ ÑÑ…ĞµĞ¼Ñ‹ Ğ‘Ğ”
- ĞÑ‚ĞºÑ€Ğ¾ĞµÑ‚ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ğ½Ğ° `http://localhost:5173`

4. **Ğ—Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ POI-Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ**

```bash
docker compose exec backend poetry run python scripts/load_pois.py
```

### ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸

```bash
make up           # Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ²ÑĞµÑ… ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²
make down         # ĞÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Ğ²ÑĞµÑ… ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²
make build        # Ğ¡Ğ±Ğ¾Ñ€ĞºĞ° ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¾Ğ²
make rebuild      # ĞŸĞµÑ€ĞµÑĞ±Ğ¾Ñ€ĞºĞ° Ğ¸ Ñ€ĞµÑÑ‚Ğ°Ñ€Ñ‚
make logs         # ĞĞ±Ñ‰Ğ¸Ğµ Ğ»Ğ¾Ğ³Ğ¸
make logs-api     # Ğ›Ğ¾Ğ³Ğ¸ API
make clean        # ĞÑ‡Ğ¸ÑÑ‚ĞºĞ° volume Ğ¸ ĞºÑÑˆĞ°
```

---

## ğŸ“‚ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

```
gorkycode/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â””â”€â”€ v1/
â”‚   â”‚   â”‚       â”œâ”€â”€ router.py
â”‚   â”‚   â”‚       â””â”€â”€ endpoints/
â”‚   â”‚   â”‚           â”œâ”€â”€ embedding.py
â”‚   â”‚   â”‚           â””â”€â”€ route.py
â”‚   â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”‚   â”œâ”€â”€ config.py
â”‚   â”‚   â”‚   â””â”€â”€ database.py
â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”‚   â”œâ”€â”€ poi.py
â”‚   â”‚   â”‚   â””â”€â”€ schemas.py
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ embedding.py
â”‚   â”‚   â”‚   â”œâ”€â”€ ranking.py
â”‚   â”‚   â”‚   â”œâ”€â”€ route_planner.py
â”‚   â”‚   â”‚   â””â”€â”€ llm.py
â”‚   â”‚   â””â”€â”€ main.py
â”‚   â”œâ”€â”€ scripts/
â”‚   â”‚   â””â”€â”€ load_pois.py
â”‚   â”œâ”€â”€ pyproject.toml
â”‚   â””â”€â”€ Dockerfile
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â””â”€â”€ client.ts
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ RouteForm.tsx
â”‚   â”‚   â”‚   â””â”€â”€ RouteDisplay.tsx
â”‚   â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ App.tsx
â”‚   â”‚   â””â”€â”€ main.tsx
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ Dockerfile
â”œâ”€â”€ data/
â”‚   â””â”€â”€ poi.json
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ Makefile
â””â”€â”€ README.md
```

---

## ğŸ”Œ API Endpoints

### `POST /api/v1/route/plan`

Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ¿ĞµÑˆĞµĞ³Ğ¾ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ°.

**Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ:**

```json
{
  "interests": "street-art, panoramas, coffee",
  "hours": 3.0,
  "start_lat": 56.3287,
  "start_lon": 44.002,
  "social_mode": "solo",
  "coffee_preference": 90,
  "intensity": "medium"
}
```

**ĞÑ‚Ğ²ĞµÑ‚:**

```json
{
  "summary": "Ğ˜Ğ½Ñ‚ĞµÑ€ĞµÑĞ½Ğ¾Ğµ Ğ²Ğ²ĞµĞ´ĞµĞ½Ğ¸Ğµ Ğ² Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚",
  "route": [
    {
      "order": 1,
      "poi_id": 123,
      "name": "ĞŸĞ»Ğ¾Ñ‰Ğ°Ğ´ÑŒ ĞœĞ¸Ğ½Ğ¸Ğ½Ğ°",
      "lat": 56.3287,
      "lon": 44.002,
      "why": "ĞŸĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¾Ğ±ÑŠÑÑĞ½ĞµĞ½Ğ¸Ğµ",
      "tip": "Ğ¡Ğ¾Ğ²ĞµÑ‚ Ğ¼ĞµÑÑ‚Ğ½Ğ¾Ğ³Ğ¾ Ğ¶Ğ¸Ñ‚ĞµĞ»Ñ",
      "est_visit_minutes": 20,
      "arrival_time": "2025-10-10T10:00:00Z",
      "leave_time": "2025-10-10T10:20:00Z",
      "is_coffee_break": false
    }
  ],
  "total_est_minutes": 180,
  "total_distance_km": 4.5,
  "notes": ["ĞĞ»ÑŒÑ‚ĞµÑ€Ğ½Ğ°Ñ‚Ğ¸Ğ²Ğ° Ğ½Ğ° Ğ´Ğ¾Ğ¶Ğ´Ğ»Ğ¸Ğ²Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ"],
  "atmospheric_description": "ĞŸĞ¾ÑÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ğ³ÑƒĞ»ĞºĞ¸"
}
```

### `POST /api/v1/embedding/generate`

Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ²Ğ¾Ğ³Ğ¾ ÑĞ¼Ğ±ĞµĞ´Ğ´Ğ¸Ğ½Ğ³Ğ° Ğ´Ğ»Ñ ĞºĞµÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ.

---

## ğŸ§  ML-Ğ¿Ğ°Ğ¹Ğ¿Ğ»Ğ°Ğ¹Ğ½

1. **Ğ­Ğ¼Ğ±ĞµĞ´Ğ´Ğ¸Ğ½Ğ³ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ¾Ğ³Ğ¾ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°** â†’ `sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2`
2. **Ğ’ĞµĞºÑ‚Ğ¾Ñ€Ğ½Ñ‹Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº** â†’ ĞšĞ¾ÑĞ¸Ğ½ÑƒÑĞ½Ğ¾Ğµ ÑÑ…Ğ¾Ğ´ÑÑ‚Ğ²Ğ¾ + ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²ĞºĞ° Ğ¿Ğ¾ ÑĞ¾Ñ†. Ñ€ĞµĞ¶Ğ¸Ğ¼Ñƒ Ğ¸ Ğ¸Ğ½Ñ‚ĞµĞ½ÑĞ¸Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸
3. **ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ°** â†’ Ğ–Ğ°Ğ´Ğ½Ñ‹Ğ¹ Ğ°Ğ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼ Ğ±Ğ»Ğ¸Ğ¶Ğ°Ğ¹ÑˆĞµĞ³Ğ¾ ÑĞ¾ÑĞµĞ´Ğ° Ñ Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸ĞµĞ¼ Ğ¿Ğ¾ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸
4. **Ğ’ÑÑ‚Ğ°Ğ²ĞºĞ° ĞºĞ¾Ñ„ĞµĞ¹Ğ½Ñ‹Ñ… Ñ‚Ğ¾Ñ‡ĞµĞº** â†’ ĞĞ´Ğ°Ğ¿Ñ‚Ğ¸Ğ²Ğ½Ğ¾Ğµ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾ Ğ¿Ñ€ĞµĞ´Ğ¿Ğ¾Ñ‡Ñ‚ĞµĞ½Ğ¸ÑĞ¼ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
5. **LLM-Ğ¾Ğ±ÑŠÑÑĞ½ĞµĞ½Ğ¸Ğµ** â†’ LLM (ChatGPT / Claude Sonnet) Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµÑ‚ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¿Ñ€Ğ¸Ñ‡Ğ¸Ğ½Ñ‹ Ğ¸ ÑĞ¾Ğ²ĞµÑ‚Ñ‹

---

## ğŸ’ ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸

- â˜• **ĞĞ´Ğ°Ğ¿Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğµ ĞºĞ¾Ñ„ĞµĞ±Ñ€ĞµĞ¹ĞºĞ¸** â€” Ğ°Ğ²Ñ‚Ğ¾-Ğ²ÑÑ‚Ğ°Ğ²ĞºĞ° ĞºĞ°Ñ„Ğµ Ğ¿Ğ¾ Ğ¿Ñ€ĞµĞ´Ğ¿Ğ¾Ñ‡Ñ‚ĞµĞ½Ğ¸Ñ
- ğŸ¯ **ĞšĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ½Ğ¾Ğµ Ñ€Ğ°Ğ½Ğ¶Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ** â€” ÑƒÑ‡Ğ¸Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ ÑĞ¾Ñ†. Ñ€ĞµĞ¶Ğ¸Ğ¼ Ğ¸ Ğ¸Ğ½Ñ‚ĞµĞ½ÑĞ¸Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ
- ğŸ—ºï¸ **Ğ˜Ğ½Ñ‚ĞµÑ€Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğµ ĞºĞ°Ñ€Ñ‚Ñ‹** â€” Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ½Ğ° Leaflet
- âš¡ **Redis-ĞºĞµÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ** â€” Ğ±Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ Ğº ÑĞ¼Ğ±ĞµĞ´Ğ´Ğ¸Ğ½Ğ³Ğ°Ğ¼
- ğŸ“ **ĞĞ±ÑŠÑÑĞ½ĞµĞ½Ğ¸Ñ Ğ¾Ñ‚ LLM** â€” ĞµÑÑ‚ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹ ÑĞ·Ñ‹Ğº Ğ´Ğ»Ñ Ğ¾Ğ±Ğ¾ÑĞ½Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ°
- ğŸ”„ **Ğ ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ** â€” Ğ¿Ğ¾Ğ´ 2 ÑĞµĞºÑƒĞ½Ğ´Ñ‹ Ğ´Ğ»Ñ ÑĞ¼Ğ±ĞµĞ´Ğ´Ğ¸Ğ½Ğ³Ğ¾Ğ² Ğ¸ Ñ€Ğ°Ğ½Ğ¶Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ, <5 ÑĞµĞºÑƒĞ½Ğ´ Ğ½Ğ° Ğ²ĞµÑÑŒ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚

---

## ğŸ”§ ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ

### ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ±ÑĞºĞµĞ½Ğ´Ğ° (`backend/app/core/config.py`)

- `EMBEDDING_MODEL` â€” Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ sentence-transformers
- `LLM_PROVIDER` â€” "anthropic" Ğ¸Ğ»Ğ¸ "openai"
- `LLM_MODEL` â€” Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ Ğ´Ğ»Ñ Ğ¾Ğ±ÑŠÑÑĞ½ĞµĞ½Ğ¸Ğ¹
- `DEFAULT_WALK_SPEED_KMH` â€” ÑÑ€ĞµĞ´Ğ½ÑÑ ÑĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ Ğ¿ĞµÑˆĞµĞ³Ğ¾ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ

### ĞŸĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ

Ğ¡Ğ¼. `.env.example` Ğ´Ğ»Ñ Ğ²ÑĞµÑ… Ğ¾Ğ¿Ñ†Ğ¸Ğ¹.

---

## ğŸ“Š Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ½Ğ¾Ğ²Ñ‹Ñ… POI

1. Ğ ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€ÑƒĞµĞ¼ `data/poi.json`:

```json
{
  "id": 9,
  "name": "ĞĞ¾Ğ²Ğ¾Ğµ Ğ¼ĞµÑÑ‚Ğ¾",
  "lat": 56.xxx,
  "lon": 44.xxx,
  "category": "Ğ¼ÑƒĞ·ĞµĞ¹",
  "tags": ["Ğ¸ÑĞºÑƒÑÑÑ‚Ğ²Ğ¾", "ÑĞ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ¾Ğµ"],
  "description": "ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ½Ğ° Ñ€ÑƒÑÑĞºĞ¾Ğ¼",
  "avg_visit_minutes": 45,
  "rating": 4.5
}
```

2. ĞŸĞµÑ€ĞµĞ·Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ĞµĞ¼ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ:

```bash
docker compose exec backend poetry run python scripts/load_pois.py
```

---

## â˜¸ï¸ Kubernetes Deployment (Production-Ready)

The application now supports production-grade Kubernetes deployment with microservices architecture and gRPC communication.

### Prerequisites

- Kubernetes cluster (minikube, k3s, or cloud provider)
- kubectl configured
- Helm 3.x installed

### Microservices Architecture

The application has been migrated to 7 microservices:

| Service | Port | Description |
|---------|------|-------------|
| **API Gateway** | 8000 | FastAPI gateway for HTTP requests |
| **Embedding Service** | 50051 | Sentence transformers for text embeddings |
| **Ranking Service** | 50052 | POI scoring and ranking |
| **Route Planner** | 50053 | TSP-based route optimization |
| **LLM Service** | 50054 | Claude/GPT explanations |
| **Geocoding Service** | 50055 | Address validation via 2GIS API |
| **POI Service** | 50056 | POI database and coffee shop search |

### Quick Start with Kubernetes

1. **Setup environment variables**

```bash
cp .env.example .env
# Fill in your API keys and database credentials
./scripts/env-to-yaml.sh  # Converts .env to Helm secrets
```

2. **Install with Helm**

```bash
make k8s-install  # Installs with one command
```

Or manually:

```bash
helm install ai-tourist ./helm/ai-tourist \
  --create-namespace \
  --namespace ai-tourist \
  --values .env.yaml
```

3. **Check deployment status**

```bash
kubectl get pods -n ai-tourist
kubectl get services -n ai-tourist
```

4. **Access the application**

Get the Minikube IP:

```bash
minikube service list -n ai-tourist
```

Open the frontend at `http://<MINIKUBE_IP>:<NODE_PORT>`

### Makefile Commands for Kubernetes

```bash
make k8s-install     # Install Helm chart
make k8s-deploy      # Deploy/upgrade application
make k8s-uninstall   # Remove deployment
make k8s-logs        # Show all pod logs
make k8s-status      # Check pod status
make proto-gen       # Generate gRPC proto files
make setup-check     # Verify cluster requirements
```

### Database Migrations

Database migrations run automatically via Helm hooks:

- Migration Job creates POI table schema
- Data Loader Job inserts initial POI data
- Jobs run on `post-install` and `post-upgrade`

### Monitoring & Observability

All services expose Prometheus metrics on port 9090:

- `/metrics` endpoint on each service
- Automatic scraping via annotations
- Grafana dashboards (optional)
- Jaeger tracing (optional)

### Configuration

Edit `helm/ai-tourist/values.yaml` to customize:

- Replica counts per service
- Resource limits (CPU/memory)
- Image tags and registries
- LLM provider (OpenAI vs Anthropic)
- Database persistence size

### Troubleshooting

**Pods not starting:**

```bash
kubectl describe pod <pod-name> -n ai-tourist
kubectl logs <pod-name> -n ai-tourist
```

**Database connection issues:**

```bash
kubectl exec -it postgres-0 -n ai-tourist -- psql -U aitourist -d aitourist_db
```

**gRPC communication errors:**

Check service discovery:

```bash
kubectl get svc -n ai-tourist
kubectl get endpoints -n ai-tourist
```

---

## ğŸ§ª Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

```bash
docker compose exec backend poetry run pytest
```

---

## ğŸ¨ Ğ Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ñ„Ñ€Ğ¾Ğ½Ñ‚ĞµĞ½Ğ´Ğ°

Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ğ½Ğ° `http://localhost:5173` Ñ Ğ²ĞºĞ»ÑÑ‡Ñ‘Ğ½Ğ½Ğ¾Ğ¹ Ğ³Ğ¾Ñ€ÑÑ‡ĞµĞ¹ Ğ¿ĞµÑ€ĞµĞ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¾Ğ¹.

**ĞÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸:**

- Ğ§Ğ¸ÑÑ‚Ñ‹Ğ¹ Ğ¼Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»Ğ¸ÑÑ‚Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ UI
- ĞĞ´Ğ°Ğ¿Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½ (Ğ¿Ğ¾Ğ´ Ğ¼Ğ¾Ğ±Ğ¸Ğ»ÑŒĞ½Ñ‹Ğµ ÑƒÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²Ğ°)
- Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ñ„Ğ¾Ñ€Ğ¼ Ğ² Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ¼ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸
- Ğ˜Ğ½Ñ‚ĞµÑ€Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğµ ĞºĞ°Ñ€Ñ‚Ñ‹ Leaflet
- Ğ¡Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸ Ğ¸ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº
